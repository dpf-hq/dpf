<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:no.hib.dpf.core="http://no.hib.dpf.core" xmlns:no.hib.dpf.diagram="http://no.hib.dpf.diagram">
  <no.hib.dpf.diagram:DSignature signature="/1">
    <dPredicates predicate="/1/@predicates.0" icon="icons/surj_36.png">
      <dGraph graph="/1/@predicates.0/@shape">
        <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph"/>
        <dNodes location="65 79" size="100 30" node="/1/@predicates.0/@shape/@nodes.0" dOutgoings="/0/@dPredicates.0/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dNodes location="236 77" size="100 30" node="/1/@predicates.0/@shape/@nodes.1" dIncomings="/0/@dPredicates.0/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dArrows arrow="/1/@predicates.0/@shape/@arrows.0" dSource="/0/@dPredicates.0/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.0/@dGraph/@dNodes.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="0 0"/>
        </dArrows>
      </dGraph>
      <visualization source="/1/@predicates.0/@shape/@arrows.0"/>
    </dPredicates>
    <dPredicates predicate="/1/@predicates.1" icon="icons/xor_36.png">
      <dGraph graph="/1/@predicates.1/@shape">
        <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph"/>
        <dNodes location="42 197" size="100 30" node="/1/@predicates.1/@shape/@nodes.0" dOutgoings="/0/@dPredicates.1/@dGraph/@dArrows.0 /0/@dPredicates.1/@dGraph/@dArrows.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dNodes location="167 75" size="100 30" node="/1/@predicates.1/@shape/@nodes.1" dIncomings="/0/@dPredicates.1/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dNodes location="231 234" size="100 30" node="/1/@predicates.1/@shape/@nodes.2" dIncomings="/0/@dPredicates.1/@dGraph/@dArrows.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dArrows arrow="/1/@predicates.1/@shape/@arrows.0" dSource="/0/@dPredicates.1/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.1/@dGraph/@dNodes.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="17 35"/>
        </dArrows>
        <dArrows arrow="/1/@predicates.1/@shape/@arrows.1" dSource="/0/@dPredicates.1/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.1/@dGraph/@dNodes.2">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="0 0"/>
        </dArrows>
      </dGraph>
      <visualization type="ArrowToArrow" source="/1/@predicates.1/@shape/@arrows.0" target="/1/@predicates.1/@shape/@arrows.1"/>
    </dPredicates>
    <dPredicates predicate="/1/@predicates.2" icon="icons/inj_36.png">
      <dGraph graph="/1/@predicates.2/@shape">
        <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph"/>
        <dNodes location="101 77" size="100 30" node="/1/@predicates.2/@shape/@nodes.0" dOutgoings="/0/@dPredicates.2/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dNodes location="287 72" size="100 30" node="/1/@predicates.2/@shape/@nodes.1" dIncomings="/0/@dPredicates.2/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dArrows arrow="/1/@predicates.2/@shape/@arrows.0" dSource="/0/@dPredicates.2/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.2/@dGraph/@dNodes.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="0 0"/>
        </dArrows>
      </dGraph>
      <visualization source="/1/@predicates.2/@shape/@arrows.0"/>
    </dPredicates>
    <dPredicates predicate="/1/@predicates.3" icon="icons/nand_36.png">
      <dGraph graph="/1/@predicates.3/@shape">
        <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph"/>
        <dNodes location="102 92" size="100 30" node="/1/@predicates.3/@shape/@nodes.0" dOutgoings="/0/@dPredicates.3/@dGraph/@dArrows.0 /0/@dPredicates.3/@dGraph/@dArrows.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dNodes location="299 34" size="100 30" node="/1/@predicates.3/@shape/@nodes.1" dIncomings="/0/@dPredicates.3/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dNodes location="323 195" size="100 30" node="/1/@predicates.3/@shape/@nodes.2" dIncomings="/0/@dPredicates.3/@dGraph/@dArrows.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dArrows arrow="/1/@predicates.3/@shape/@arrows.0" dSource="/0/@dPredicates.3/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.3/@dGraph/@dNodes.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="0 0"/>
        </dArrows>
        <dArrows arrow="/1/@predicates.3/@shape/@arrows.1" dSource="/0/@dPredicates.3/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.3/@dGraph/@dNodes.2">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="-29 -35"/>
        </dArrows>
      </dGraph>
      <visualization type="ArrowToArrow" source="/1/@predicates.3/@shape/@arrows.0" target="/1/@predicates.3/@shape/@arrows.1"/>
    </dPredicates>
    <dPredicates predicate="/1/@predicates.4" icon="icons/irr_36.png">
      <dGraph graph="/1/@predicates.4/@shape">
        <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph"/>
        <dNodes location="140 79" size="100 30" node="/1/@predicates.4/@shape/@nodes.0" dOutgoings="/0/@dPredicates.4/@dGraph/@dArrows.0" dIncomings="/0/@dPredicates.4/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dArrows arrow="/1/@predicates.4/@shape/@arrows.0" dSource="/0/@dPredicates.4/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.4/@dGraph/@dNodes.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="-41 5"/>
        </dArrows>
      </dGraph>
      <visualization/>
    </dPredicates>
    <dPredicates predicate="/1/@predicates.5" icon="icons/inv_36.png">
      <dGraph graph="/1/@predicates.5/@shape">
        <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph"/>
        <dNodes location="85 80" size="100 30" node="/1/@predicates.5/@shape/@nodes.0" dOutgoings="/0/@dPredicates.5/@dGraph/@dArrows.0" dIncomings="/0/@dPredicates.5/@dGraph/@dArrows.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dNodes location="280 90" size="100 30" node="/1/@predicates.5/@shape/@nodes.1" dOutgoings="/0/@dPredicates.5/@dGraph/@dArrows.1" dIncomings="/0/@dPredicates.5/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dArrows arrow="/1/@predicates.5/@shape/@arrows.0" dSource="/0/@dPredicates.5/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.5/@dGraph/@dNodes.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="0 0"/>
        </dArrows>
        <dArrows arrow="/1/@predicates.5/@shape/@arrows.1" dSource="/0/@dPredicates.5/@dGraph/@dNodes.1" dTarget="/0/@dPredicates.5/@dGraph/@dNodes.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="0 0"/>
        </dArrows>
      </dGraph>
      <visualization type="ArrowToArrow"/>
    </dPredicates>
    <dPredicates predicate="/1/@predicates.6" icon="icons/mult_36.png">
      <dGraph graph="/1/@predicates.6/@shape">
        <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph"/>
        <dNodes location="57 89" size="100 30" node="/1/@predicates.6/@shape/@nodes.1" dOutgoings="/0/@dPredicates.6/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dNodes location="235 90" size="100 30" node="/1/@predicates.6/@shape/@nodes.2" dIncomings="/0/@dPredicates.6/@dGraph/@dArrows.0">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dNodes.0"/>
        </dNodes>
        <dArrows arrow="/1/@predicates.6/@shape/@arrows.0" dSource="/0/@dPredicates.6/@dGraph/@dNodes.0" dTarget="/0/@dPredicates.6/@dGraph/@dNodes.1">
          <dType href="platform:/resource/DefaultDSpecification.dpf#//@dGraph/@dArrows.0"/>
          <nameOffset offset="-14 0"/>
        </dArrows>
      </dGraph>
      <visualization/>
    </dPredicates>
  </no.hib.dpf.diagram:DSignature>
  <no.hib.dpf.core:Signature>
    <predicates symbol="surjective">
      <shape id="dacc4224-482c-463d-a34b-a190cf7812c8" name="Default name">
        <type href="platform:/resource/DefaultSpecification.xmi#//@graph"/>
        <nodes id="1366cf18-0c1d-4401-b15b-96dac99c7d1a" name="X" outgoings="/1/@predicates.0/@shape/@arrows.0" typeID="09edcae2-6175-412c-b7aa-038cd9d6d361">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <nodes id="e6d5188b-e0da-4563-b825-accb41844338" name="Y" incomings="/1/@predicates.0/@shape/@arrows.0" typeID="6f7e21af-48a9-423d-a730-4b5d9c12364b">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <arrows id="5e51d157-6167-4fec-9c8e-3576cd017d66" name="XY" source="/1/@predicates.0/@shape/@nodes.0" target="/1/@predicates.0/@shape/@nodes.1" typeID="7705a272-b738-4e73-a9ee-6ef1e121515e">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
      </shape>
      <validator type="JAVA" validator="import java.util.*; &#xA;&#xA;import no.hib.dpf.core.Arrow; &#xA;import no.hib.dpf.core.Graph; &#xA;import no.hib.dpf.core.Node; &#xA;import no.hib.dpf.core.impl.Checker; &#xA;public class CheckInstance implements Checker { &#xA;&#x9;public boolean check(Map&lt;String, String> maps, Graph shape, Map&lt;Node, List&lt;Node>> nodeMap, Map&lt;Arrow, List&lt;Arrow>> arrowMap) { &#xA;&#x9;&#x9;&#xA;&#x9;&#x9;List&lt;Node> yNodes = nodeMap.get(shape.getNodeByName(&quot;Y&quot;)); &#xA;&#x9;&#x9;List&lt;Arrow> arrows = arrowMap.get(shape.getArrows().get(0)); &#xA;&#x9;&#x9;List&lt;Node> visitedY = new ArrayList&lt;Node>(); &#xA;&#x9;&#x9;if(arrows != null){&#xA;&#x9;&#x9;&#x9;for(Arrow arrow : arrows){&#xA;&#x9;&#x9;&#x9;&#x9;if (!visitedY.contains(arrow.getTarget())) &#xA;&#x9;&#x9;&#x9;&#x9;&#x9;visitedY.add(arrow.getTarget()); &#xA;&#x9;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#x9;&#x9;&#xA;&#x9;&#x9;if (yNodes != null &amp;&amp; visitedY.size() != yNodes.size()){&#xA;&#x9;&#x9;&#x9;for(Node node : yNodes){&#xA;&#x9;&#x9;&#x9;&#x9;if(!visitedY.contains(node))&#xA;&#x9;&#x9;&#x9;&#x9;System.out.println(&quot;Node &quot; + node.getName() + &quot; Violated Surjective Constraint&quot;);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;return false; &#xA;&#x9;&#x9;} &#xA;&#x9;&#x9;return true; &#xA;&#x9;} &#xA;}"/>
    </predicates>
    <predicates symbol="xor">
      <shape id="c488643f-04c5-44e8-890f-3a477135e069" name="Default name">
        <type href="platform:/resource/DefaultSpecification.xmi#//@graph"/>
        <nodes id="6c05f3c4-d5d5-4f4f-a6de-d0e44eebad9d" name="Z" outgoings="/1/@predicates.1/@shape/@arrows.0 /1/@predicates.1/@shape/@arrows.1" typeID="060ca273-089b-43f8-8684-84650ccc2712">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <nodes id="632a4ace-a2da-4c7c-b83c-afb72732b482" name="X" incomings="/1/@predicates.1/@shape/@arrows.0" typeID="67650cff-7209-4207-aa38-a063a0a87b0a">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <nodes id="1ee0e1e4-ade9-4e8c-8795-99e66854b17b" name="Y" incomings="/1/@predicates.1/@shape/@arrows.1" typeID="20ea3319-a223-4ac9-b617-938897e85616">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <arrows id="67fc7930-e9c9-4017-9020-828863ac4db3" name="ZX" source="/1/@predicates.1/@shape/@nodes.0" target="/1/@predicates.1/@shape/@nodes.1" typeID="943f2438-af98-466d-a16c-0562e3fe028d">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
        <arrows id="cdb7aa8b-516c-4d8f-85dd-eeb3f0c28088" name="ZY" source="/1/@predicates.1/@shape/@nodes.0" target="/1/@predicates.1/@shape/@nodes.2" typeID="07584f06-24bf-4b28-bfff-a71e941e17dc">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
      </shape>
      <validator type="JAVA" validator="import java.util.*; &#xA;import java.util.Map.Entry;&#xA;&#xA;import no.hib.dpf.core.Arrow; &#xA;import no.hib.dpf.core.Graph; &#xA;import no.hib.dpf.core.Node; &#xA;import no.hib.dpf.core.impl.Checker; &#xA;public class CheckInstance implements Checker { &#xA;&#x9;public boolean check(Map&lt;String, String> maps, Graph shape, Map&lt;Node, List&lt;Node>> nodeMap, Map&lt;Arrow, List&lt;Arrow>> arrowMap) { &#xA;&#x9;&#x9;Map&lt;Node, List&lt;Arrow>> targetWithX = new HashMap&lt;Node, List&lt;Arrow>>();&#xA;&#x9;&#x9;Map&lt;Node, List&lt;Arrow>> violated = new HashMap&lt;Node, List&lt;Arrow>>();&#xA;&#x9;&#x9;List&lt;Node> visitedZ = new ArrayList&lt;Node>();&#xA;&#x9;&#x9;List&lt;Arrow> zx = arrowMap.get(shape.getArrowByName(&quot;ZX&quot;));&#xA;&#x9;&#x9;if(zx != null){ for(Arrow arrow : zx){&#xA;&#x9;&#x9;&#x9;&#x9;Node source = arrow.getSource();&#xA;&#x9;&#x9;&#x9;&#x9;if(!visitedZ.contains(source)) visitedZ.add(source);&#xA;&#x9;&#x9;&#x9;&#x9;List&lt;Arrow> value = targetWithX.containsKey(source) ? targetWithX.get(source) : new ArrayList&lt;Arrow>();&#xA;&#x9;&#x9;&#x9;&#x9;value.add(arrow); targetWithX.put(source, value);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;List&lt;Arrow> zy = arrowMap.get(shape.getArrowByName(&quot;ZY&quot;));&#xA;&#x9;&#x9;if(zy != null){&#xA;&#x9;&#x9;&#x9;for(Arrow arrow : zy){&#xA;&#x9;&#x9;&#x9;&#x9;Node source = arrow.getSource();&#xA;&#x9;&#x9;&#x9;&#x9;if(!visitedZ.contains(source)) visitedZ.add(source);&#xA;&#x9;&#x9;&#x9;&#x9;if(targetWithX.containsKey(source)){&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;List&lt;Arrow> value = violated.containsKey(source) ? violated.get(source) : new ArrayList&lt;Arrow>();&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;if(value.isEmpty()) value.addAll(targetWithX.get(source));&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;value.add(arrow); violated.put(source, value);&#xA;&#x9;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;List&lt;Node> zNodes = nodeMap.get(shape.getNodeByName(&quot;Z&quot;));&#xA;&#x9;&#x9;if(zNodes != null){&#xA;&#x9;&#x9;&#x9;for(Node node : zNodes)&#xA;&#x9;&#x9;&#x9;&#x9;if(!visitedZ.contains(node)) violated.put(node, null);&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;if(violated.size() == 0) return true;&#xA;&#x9;&#x9;for(Entry&lt;Node, List&lt;Arrow>> entry : violated.entrySet()){&#xA;&#x9;&#x9;&#x9;System.out.println(entry.getKey().getName() + &quot; violates XOR constraint&quot;);&#xA;&#x9;&#x9;&#x9;if(entry.getValue() == null){&#xA;&#x9;&#x9;&#x9;&#x9;System.out.println(&quot;It has no outgoing arrows which has type homophomism to ZX or ZY&quot;);&#xA;&#x9;&#x9;&#x9;}else{&#xA;&#x9;&#x9;&#x9;&#x9;System.out.println(&quot;It has multiply typed outgoing arrows:&quot;);&#xA;&#x9;&#x9;&#x9;&#x9;for(Arrow arrow : entry.getValue())&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;System.out.println(arrow.getSource().getName() + &quot;-->&quot; + arrow.getTarget().getName());&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;return false; &#xA;&#x9;} &#xA;}&#xA;"/>
    </predicates>
    <predicates symbol="injective">
      <shape id="064fa707-f68e-4561-891a-1c45d6d3baa2" name="Default name">
        <type href="platform:/resource/DefaultSpecification.xmi#//@graph"/>
        <nodes id="e2f26212-b509-4ecb-ab19-cfe774ace873" name="X" outgoings="/1/@predicates.2/@shape/@arrows.0" typeID="36993ade-6f9a-4f22-a8dd-494e41d206ec">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <nodes id="922b2b3a-74cd-44fc-9c91-50353c1cb0fb" name="Y" incomings="/1/@predicates.2/@shape/@arrows.0" typeID="35c60422-bed1-4fc8-a001-b87aadb71fb9">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <arrows id="d0b5f8c3-0a99-4c5a-96ae-481618ccbbe2" name="XY" source="/1/@predicates.2/@shape/@nodes.0" target="/1/@predicates.2/@shape/@nodes.1" typeID="adb307b3-5e0d-4b04-95bd-0ef9a54e6c47">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
      </shape>
      <validator type="JAVA" validator="import java.util.*; &#xA;import java.util.Map.Entry;&#xA;&#xA;import no.hib.dpf.core.Arrow; &#xA;import no.hib.dpf.core.Graph; &#xA;import no.hib.dpf.core.Node; &#xA;import no.hib.dpf.core.impl.Checker; &#xA;public class CheckInstance implements Checker { &#xA;&#x9;public boolean check(Map&lt;String, String> maps, Graph shape, Map&lt;Node, List&lt;Node>> nodeMap, Map&lt;Arrow, List&lt;Arrow>> arrowMap) { &#xA;&#xA;&#x9;&#x9;List&lt;Arrow> arrows = arrowMap.get(shape.getArrowByName(&quot;XY&quot;)); &#xA;&#x9;&#x9;Map&lt;Node, List&lt;Arrow>> violated = new HashMap&lt;Node, List&lt;Arrow>>();&#xA;&#x9;&#x9;if(arrows != null){&#xA;&#x9;&#x9;&#x9;for(Arrow arrow : arrows){&#xA;&#x9;&#x9;&#x9;&#x9;Node target = arrow.getTarget();&#xA;&#x9;&#x9;&#x9;&#x9;List&lt;Arrow> value = violated.containsKey(target) ? violated.get(target) : new ArrayList&lt;Arrow>();&#xA;&#x9;&#x9;&#x9;&#x9;value.add(arrow);&#xA;&#x9;&#x9;&#x9;&#x9;violated.put(target, value);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;boolean result = true;&#xA;&#x9;&#x9;for(Entry&lt;Node, List&lt;Arrow>> entry : violated.entrySet())&#xA;&#x9;&#x9;&#x9;if(entry.getValue().size() > 1){&#xA;&#x9;&#x9;&#x9;&#x9;result = false;&#xA;&#x9;&#x9;&#x9;&#x9;System.out.println(entry.getKey().getName() + &quot; violates INJECTIVE constraint&quot;);&#xA;&#x9;&#x9;&#x9;&#x9;System.out.println(&quot;It has multiply incoming arrows:&quot;);&#xA;&#x9;&#x9;&#x9;&#x9;for(Arrow arrow : entry.getValue())&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;System.out.println(arrow.getSource().getName() + &quot;-->&quot; + arrow.getTarget().getName());&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;return result; &#xA;&#x9;} &#xA;}"/>
    </predicates>
    <predicates symbol="nand">
      <shape id="1072633c-c8da-4aaf-ae62-fc7a317c1b69" name="Default name">
        <type href="platform:/resource/DefaultSpecification.xmi#//@graph"/>
        <nodes id="d467bf1a-2092-424d-9064-59dc95b674fc" name="Z" outgoings="/1/@predicates.3/@shape/@arrows.0 /1/@predicates.3/@shape/@arrows.1" typeID="01a548de-4f49-484f-a6a2-4cd377a5a996">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <nodes id="939e8bd2-7e90-4709-9dbd-5ef57e82d223" name="X" incomings="/1/@predicates.3/@shape/@arrows.0" typeID="b7a205cc-0896-4c7a-b942-e40111ef074a">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <nodes id="b424c646-c4e0-4537-8979-54d8610163ef" name="Y" incomings="/1/@predicates.3/@shape/@arrows.1" typeID="b7a205cc-0896-4c7a-b942-e40111ef074a">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <arrows id="956f8155-08c5-474e-831e-d27e18b6d3e9" name="ZX" source="/1/@predicates.3/@shape/@nodes.0" target="/1/@predicates.3/@shape/@nodes.1" typeID="d024cfa7-0b2a-4677-a5d4-f0174a4ddcc6">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
        <arrows id="3e978c34-32d5-4add-bf1c-e43a5cf1c2de" name="ZY" source="/1/@predicates.3/@shape/@nodes.0" target="/1/@predicates.3/@shape/@nodes.2" typeID="d024cfa7-0b2a-4677-a5d4-f0174a4ddcc6">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
      </shape>
      <validator type="JAVA" validator="import java.util.*; &#xA;import java.util.Map.Entry;&#xA;import no.hib.dpf.core.Arrow; &#xA;import no.hib.dpf.core.Graph; &#xA;import no.hib.dpf.core.Node; &#xA;import no.hib.dpf.core.impl.Checker; &#xA;public class CheckInstance implements Checker { &#xA;&#x9;public boolean check(Map&lt;String, String> maps, Graph shape, Map&lt;Node, List&lt;Node>> nodeMap, Map&lt;Arrow, List&lt;Arrow>> arrowMap) { &#xA;&#x9;&#x9;Map&lt;Node, List&lt;Arrow>> targetWithX = new HashMap&lt;Node, List&lt;Arrow>>();&#xA;&#x9;&#x9;Map&lt;Node, List&lt;Arrow>> violated = new HashMap&lt;Node, List&lt;Arrow>>();&#xA;&#x9;&#x9;List&lt;Arrow> zx = arrowMap.get(shape.getArrowByName(&quot;ZX&quot;));&#xA;&#x9;&#x9;if(zx != null){&#xA;&#x9;&#x9;&#x9;for(Arrow arrow : zx){&#xA;&#x9;&#x9;&#x9;&#x9;Node source = arrow.getSource();&#xA;&#x9;&#x9;&#x9;&#x9;List&lt;Arrow> value = targetWithX.containsKey(source) ? targetWithX.get(source) : new ArrayList&lt;Arrow>();&#xA;&#x9;&#x9;&#x9;&#x9;value.add(arrow);&#xA;&#x9;&#x9;&#x9;&#x9;targetWithX.put(source, value);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;List&lt;Arrow> zy = arrowMap.get(shape.getArrowByName(&quot;ZY&quot;));&#xA;&#x9;&#x9;if(zy != null){&#xA;&#x9;&#x9;&#x9;for(Arrow arrow : zy){&#xA;&#x9;&#x9;&#x9;&#x9;Node source = arrow.getSource();&#xA;&#x9;&#x9;&#x9;&#x9;if(targetWithX.containsKey(source)){&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;List&lt;Arrow> value = violated.containsKey(source) ? violated.get(source) : new ArrayList&lt;Arrow>();&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;if(value.isEmpty())&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;value.addAll(targetWithX.get(source));&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;value.add(arrow);&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;violated.put(source, value);&#xA;&#x9;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;if(violated.size() == 0)&#xA;&#x9;&#x9;&#x9;return true;&#xA;&#x9;&#x9;for(Entry&lt;Node, List&lt;Arrow>> entry : violated.entrySet()){&#xA;&#x9;&#x9;&#x9;System.out.println(entry.getKey().getName() + &quot; violates NAND constraint&quot;);&#xA;&#x9;&#x9;&#x9;System.out.println(&quot;It has multiply typed outgoing arrows:&quot;);&#xA;&#x9;&#x9;&#x9;for(Arrow arrow : entry.getValue())&#xA;&#x9;&#x9;&#x9;&#x9;System.out.println(arrow.getSource().getName() + &quot;-->&quot; + arrow.getTarget().getName());&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;return false; &#xA;&#x9;} &#xA;}&#xA;"/>
    </predicates>
    <predicates symbol="irreflexive">
      <shape id="a6be1b9d-6912-4c3a-a418-0954b62f658d" name="Default name">
        <type href="platform:/resource/DefaultSpecification.xmi#//@graph"/>
        <nodes id="8a4f8f86-e484-44f2-9704-6bd0e5bb91ef" name="X" outgoings="/1/@predicates.4/@shape/@arrows.0" incomings="/1/@predicates.4/@shape/@arrows.0" typeID="89037c4a-aec8-45dd-b33d-2ed41407988d">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <arrows id="cd240eb8-78d5-4a5d-a098-a2a0a9f4a36a" name="XX" source="/1/@predicates.4/@shape/@nodes.0" target="/1/@predicates.4/@shape/@nodes.0" typeID="b276feeb-0432-4f17-a695-6dd70573b69c">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
      </shape>
      <validator type="JAVA" validator="import java.util.*;&#xA;&#xA;import no.hib.dpf.core.Arrow;&#xA;import no.hib.dpf.core.Graph;&#xA;import no.hib.dpf.core.Node;&#xA;import no.hib.dpf.core.impl.Checker;&#xA;&#xA;public class CheckInstance implements Checker {&#xA;&#x9;public boolean check(Map&lt;String, String> maps, Graph shape, Map&lt;Node, List&lt;Node>> nodeMap,&#xA;&#x9;&#x9;&#x9;Map&lt;Arrow, List&lt;Arrow>> arrowMap) {&#xA;&#x9;&#x9;List&lt;Arrow> violated = new ArrayList&lt;Arrow>();&#xA;&#x9;&#x9;List&lt;Arrow> xx = arrowMap.get(shape.getArrowByName(&quot;XX&quot;));&#xA;&#x9;&#x9;if (xx != null) &#xA;&#x9;&#x9;&#x9;for (Arrow arrow : xx)&#xA;&#x9;&#x9;&#x9;&#x9;if (arrow.getTarget() == arrow.getSource())&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;violated.add(arrow);&#xA;&#x9;&#x9;if (violated.size() == 0)&#xA;&#x9;&#x9;&#x9;return true;&#xA;&#x9;&#x9;for (Arrow entry : violated)&#xA;&#x9;&#x9;&#x9;System.out.println(entry.getName()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;+ &quot; violates Irreflexive constraint. &quot;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;+ entry.getSource().getName() + &quot; goes back to itself.&quot;);&#xA;&#x9;&#x9;return false;&#xA;&#x9;}&#xA;}&#xA;"/>
    </predicates>
    <predicates symbol="inverse">
      <shape id="d1e33bcd-d217-4b40-a812-6dd0f079d826" name="Default name">
        <type href="platform:/resource/DefaultSpecification.xmi#//@graph"/>
        <nodes id="2ff61b86-cce9-4de4-a64f-27ace8b9b5cf" name="X" outgoings="/1/@predicates.5/@shape/@arrows.0" incomings="/1/@predicates.5/@shape/@arrows.1" typeID="b7a205cc-0896-4c7a-b942-e40111ef074a">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <nodes id="291c9f3b-8a27-4c7d-9468-a95f5fe01532" name="Y" outgoings="/1/@predicates.5/@shape/@arrows.1" incomings="/1/@predicates.5/@shape/@arrows.0" typeID="b7a205cc-0896-4c7a-b942-e40111ef074a">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <arrows id="e4e378d4-046d-42af-8176-7486e90c678f" name="XY" source="/1/@predicates.5/@shape/@nodes.0" target="/1/@predicates.5/@shape/@nodes.1" typeID="d024cfa7-0b2a-4677-a5d4-f0174a4ddcc6">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
        <arrows id="1b6b3882-a13a-4416-b9c6-6bbdd05f0705" name="YX" source="/1/@predicates.5/@shape/@nodes.1" target="/1/@predicates.5/@shape/@nodes.0" typeID="d024cfa7-0b2a-4677-a5d4-f0174a4ddcc6">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
      </shape>
      <validator type="JAVA" validator="import java.util.ArrayList;&#xA;import java.util.HashMap;&#xA;import java.util.List;&#xA;import java.util.Map;&#xA;import no.hib.dpf.core.Arrow;&#xA;import no.hib.dpf.core.Graph;&#xA;import no.hib.dpf.core.Node;&#xA;import no.hib.dpf.core.impl.Checker;&#xA;&#xA;public class CheckInstance implements Checker {&#xA;&#x9;@Override&#xA;&#x9;public boolean check(Map&lt;String, String> maps, Graph graph, Map&lt;Node, List&lt;Node>> nodeMap,&#xA;&#x9;&#x9;&#x9;Map&lt;Arrow, List&lt;Arrow>> arrowMap) {&#xA;&#x9;&#x9;List&lt;Arrow> xy = arrowMap.get(graph.getArrowByName(&quot;XY&quot;));&#xA;&#x9;&#x9;Map&lt;Node, List&lt;Node>> visited = new HashMap&lt;Node, List&lt;Node>>();&#xA;&#x9;&#x9;if (xy != null) {&#xA;&#x9;&#x9;&#x9;for (Arrow arrow : xy) {&#xA;&#x9;&#x9;&#x9;&#x9;Node source = arrow.getSource();&#xA;&#x9;&#x9;&#x9;&#x9;List&lt;Node> value = visited.containsKey(source) ? visited&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;.get(source) : new ArrayList&lt;Node>();&#xA;&#x9;&#x9;&#x9;&#x9;if (!value.contains(arrow.getTarget()))&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;value.add(arrow.getTarget());&#xA;&#x9;&#x9;&#x9;&#x9;visited.put(source, value);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;List&lt;Arrow> yx = arrowMap.get(graph.getArrowByName(&quot;YX&quot;));&#xA;&#x9;&#x9;List&lt;Arrow> withXYArrow = new ArrayList&lt;Arrow>();&#xA;&#x9;&#x9;List&lt;Arrow> withoutXYArrow = new ArrayList&lt;Arrow>();&#xA;&#x9;&#x9;if (xy != null) {&#xA;&#x9;&#x9;&#x9;for (Arrow arrow : yx) {&#xA;&#x9;&#x9;&#x9;&#x9;Node target = arrow.getTarget();&#xA;&#x9;&#x9;&#x9;&#x9;Node source = arrow.getSource();&#xA;&#x9;&#x9;&#x9;&#x9;List&lt;Node> value = visited.get(target);// ? visited.get(source)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;// : new&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;// ArrayList&lt;Node>();&#xA;&#x9;&#x9;&#x9;&#x9;if (value == null)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;withoutXYArrow.add(arrow);&#xA;&#x9;&#x9;&#x9;&#x9;else if (!value.contains(source))&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;withXYArrow.add(arrow);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;if (withoutXYArrow.size() == 0 &amp;&amp; withXYArrow.size() == 0)&#xA;&#x9;&#x9;&#x9;return true;&#xA;&#x9;&#x9;for (Arrow arrow : withXYArrow)&#xA;&#x9;&#x9;&#x9;System.out&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;.println(arrow.getSource().getName()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;+ &quot;-->&quot;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;+ arrow.getTarget().getName()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;+ &quot;violate inverse constraint. It has no other direction relationship.&quot;);&#xA;&#x9;&#x9;for (Arrow arrow : withoutXYArrow)&#xA;&#x9;&#x9;&#x9;System.out&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;.println(arrow.getTarget().getName()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;+ &quot;-->&quot;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;+ arrow.getSource().getName()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;+ &quot;violate inverse constraint. It has no other direction relationship.&quot;);&#xA;&#x9;&#x9;return false;&#xA;&#x9;}&#xA;}"/>
    </predicates>
    <predicates symbol="multi" parameters="min:0;max:1">
      <shape id="c96aa25e-c517-4639-8fd9-d39ae965b0a9" name="Default name">
        <type href="platform:/resource/DefaultSpecification.xmi#//@graph"/>
        <nodes id="cd61cd13-b5c4-4ac7-b543-135f67aac088" name="Y" typeID="a7f32c2c-5c28-44dc-a611-5b24e52a3005">
          <typeNode href="platform:/resource/DefaultGraph.xmi#//@nodes.0"/>
        </nodes>
        <nodes id="17ed2385-4994-4760-9629-92563ffa4eea" name="X" outgoings="/1/@predicates.6/@shape/@arrows.0" typeID="6fc89e2c-3066-464f-98fa-37521ee826fb">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <nodes id="eed53498-7d89-4e60-baa6-4ba759038443" name="Y" incomings="/1/@predicates.6/@shape/@arrows.0" typeID="d01c1e94-b3f0-4fe4-a230-09c5259f852e">
          <typeNode href="platform:/resource/DefaultSpecification.xmi#//@graph/@nodes.0"/>
        </nodes>
        <arrows id="4fa7c16c-d5bd-499f-a5ee-923a4dc5eb36" name="XY" source="/1/@predicates.6/@shape/@nodes.1" target="/1/@predicates.6/@shape/@nodes.2" typeID="a46df347-073b-488f-82ac-39d0abe392cb">
          <typeArrow href="platform:/resource/DefaultSpecification.xmi#//@graph/@arrows.0"/>
        </arrows>
      </shape>
      <validator type="JAVA" validator="import java.util.HashMap;&#xA;import java.util.List;&#xA;import java.util.Map;&#xA;import java.util.Map.Entry;&#xA;&#xA;import no.hib.dpf.core.Arrow;&#xA;import no.hib.dpf.core.Graph;&#xA;import no.hib.dpf.core.Node;&#xA;import no.hib.dpf.core.impl.Checker;&#xA;public class CheckInstance implements Checker{&#xA;&#x9;@Override&#xA;&#x9;public boolean check(Map&lt;String, String> maps, Graph graph, Map&lt;Node, List&lt;Node>> nodeMap,&#xA;&#x9;&#x9;&#x9;Map&lt;Arrow, List&lt;Arrow>> arrowMap) {&#xA;&#x9;&#x9;int min = Integer.parseInt(maps.get(&quot;min&quot;));&#xA;&#x9;&#x9;int max = Integer.parseInt(maps.get(&quot;max&quot;));&#xA;&#x9;&#x9;List&lt;Arrow> arrows = arrowMap.get(graph.getArrowByName(&quot;XY&quot;));&#xA;&#x9;&#x9;Map&lt;Node, Integer> record = new HashMap&lt;Node, Integer>();&#xA;&#x9;&#x9;if(arrows != null) {&#xA;&#x9;&#x9;&#x9;for (Arrow arrow : arrows) {&#xA;&#x9;&#x9;&#x9;&#x9;Node source = arrow.getSource();&#xA;&#x9;&#x9;&#x9;&#x9;Integer times = record.get(source);&#xA;&#x9;&#x9;&#x9;&#x9;record.put(source, times == null ? 1 : times + 1); &#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;List&lt;Node> nodes = nodeMap.get(graph.getNodeByName(&quot;X&quot;));&#xA;&#x9;&#x9;if(nodes != null){&#xA;&#x9;&#x9;&#x9;for(Node node : nodes)&#xA;&#x9;&#x9;&#x9;&#x9;if(!record.containsKey(node))&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;record.put(node, 0);&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;boolean result = true;&#xA;&#x9;&#x9;for(Entry&lt;Node, Integer>  entry : record.entrySet()){&#xA;&#x9;&#x9;&#x9;Integer value = entry.getValue();&#xA;&#x9;&#x9;&#x9;System.out.println(value);&#xA;&#x9;&#x9;&#x9;System.out.println(max);&#xA;&#x9;&#x9;&#x9;if(value &lt; min || value > max){&#xA;&#x9;&#x9;&#x9;&#x9;System.out.println(entry.getKey().getName() + &quot; has violates Multi[&quot; + min + &quot;,&quot; + max + &quot;] constraints. It has &quot; + value + &quot; outgoings.&quot;);&#xA;&#x9;&#x9;&#x9;&#x9;result = false;&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;return result;&#xA;&#x9;}&#xA;}"/>
    </predicates>
  </no.hib.dpf.core:Signature>
</xmi:XMI>
